<p align="center">
    <img src="https://github.com/Raphiiko/Oyasumi/blob/develop/docs/img/logo_light.png?raw=true#gh-light-mode-only" width="450">
    <img src="https://github.com/Raphiiko/Oyasumi/blob/develop/docs/img/logo_dark.png?raw=true#gh-dark-mode-only" width="450">
    <br/>
    <br/>
    :zzz: 一個用於在虛擬實境中幫助睡眠的工具集合。:zzz:
</p>

<p align="center">
    <a><img alt="最新版本" src="https://img.shields.io/github/v/tag/Raphiiko/Oyasumi?color=informational&label=version&sort=semver"></a>
    <a><img alt="正式版建構狀態" src="https://github.com/Raphiiko/Oyasumi/actions/workflows/build-release.yml/badge.svg"/></a>
    <a><img alt="開發版建構狀態" src="https://github.com/Raphiiko/Oyasumi/actions/workflows/build-development.yml/badge.svg"/></a>
    <a href="https://github.com/Raphiiko/Oyasumi/blob/develop/LICENSE"><img alt="許可證" src="https://img.shields.io/github/license/Raphiiko/Oyasumi"></a>
    <br>
    <a href="https://discord.gg/7MqdPJhYxC"><img alt="Discord 徽章" src="https://img.shields.io/discord/1023672078672609382?color=5865f2&label=Discord&logo=discord&logoColor=https%3A%2F%2Fshields.io%2Fcategory%2Fother"/></a>
    <a href="https://raphiiko.booth.pm/items/4216880"><img alt="Booth.pm 頁面" src="https://img.shields.io/badge/Store-BOOTH.PM-red"/></a>
    <a href="https://raphiiko.gumroad.com/l/oyasumi?layout=profile"><img alt="Gumroad 頁面" src="https://img.shields.io/badge/Store-Gumroad-important"/></a>
</p>

<p align="center">
  Oyasumi是一個用於在虛擬實境（VRChat）中幫助睡眠的開源工具。
  <br>
  Oyasumiは虛擬現實中幫助睡眠的開源工具軟體。
  <br>
  您可以在 [booth.pm的商店頁面](https://raphiiko.booth.pm/items/4216880) 上找到日本語的說明。
</p>

<p align="center">
  如果您想交流，歡迎加入我們的 <a href="https://discord.gg/7MqdPJhYxC"><img src="https://user-images.githubusercontent.com/111654848/192362041-f09cc066-a964-446f-aa2c-fa7a7a31ec05.png" width="16" style="fill: white" /> Discord 伺服器</a>！
</p>

## 入門

在 [Releases](https://github.com/Raphiiko/Oyasumi/releases) 頁面上獲取最新的安裝程式。

<p align="center">
<table>
<tr>
<td><p align="center"><b>概觀</b></p></td>
<td><p align="center"><b>睡眠動畫</b></p></td>
<td><p align="center"><b>GPU 功率限制</b></p></td>
<td><p align="center"><b>MSI Afterburner 自動化</b></p></td>
<td><p align="center"><b>睡眠檢測</b></p></td>
</tr>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172557-9df82c8c-697d-490a-98d6-e055b06b6367.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172232-54285875-5242-46bb-9254-7ba41549fb84.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172301-6739bca9-925b-4d3e-be21-1379ccf55c9f.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172397-f4b09cf8-f8e1-4803-aeef-974abcded722.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172492-2223b914-c231-47f7-8b8a-61bd487017bc.png" width="100%" crossorigin></p></td>
</tr>
<tr>
<td><p align="center"><b>狀態自動化</b></p></td>
<td><p align="center"><b>解析度自動化</b></p></td>
<td><p align="center"><b>自動接受邀請請求</b></p></td>
<td><p align="center"><b>電池自動化</b></p></td>
<td><p align="center"><b>亮度自動化</b></p></td>
</tr>
<tr>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172710-ee10a31e-899a-4337-88c1-83005d2f211b.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229173014-db751c21-1956-446c-88c2-f6f870ea9767.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172786-73c85c96-a758-437a-a102-884d47957067.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172848-20896789-60a2-4e9a-8795-19ae2bb3c276.png" width="100%" crossorigin></p></td>
<td><p align="center"><img src="https://user-images.githubusercontent.com/111654848/229172896-f95d89e1-3beb-4a0e-9b5d-2b7c82badd86.png" width="100%" crossorigin></p></td>
</tr>
</table>
</p>

## 功能

<table align="right">
<tr><td><img src="https://user-images.githubusercontent.com/111654848/198073951-85a52109-6fad-4edd-ad53-897a6d8adf12.gif" width="300"></td></tr>
<tr><td><img src="https://user-images.githubusercontent.com/111654848/198073192-efa203e3-95e5-4961-a210-65e30b33cc68.gif" width="300"></td></tr>
</table>

- :electric_plug: GPU 自動化:
  - 當您入睡或醒來時：
    - 啟動您的 [MSI Afterburner](https://www.msi.com/Landing/afterburner/graphics-cards) 配置檔（NVIDIA/AMD）
    - 調整功率限制（NVIDIA）
- :battery: 電池自動化:
  - 在您入睡時自動關閉追蹤器和/或控制器：
    - 這樣您早上起床時仍然有一些電力！
    - 將它們放在充電器上時
- :large_blue_circle: VRChat 狀態自動化
  - 根據您所在世界的玩家數量自動更改您的狀態：
    <br>_當您獨自入睡時切換到藍色，這樣您的朋友就可以加入您，而當周圍有足夠多的人時切換到橙色！_
- :wrench: 一鍵關閉所有追蹤器和/或控制器。
- :email: 自動接受 VRChat 的邀請請求
  - 在您入睡時自動讓朋友進來！
  - 使用黑名單或白名單配置要接受的邀請請求。
- :low_brightness: 自動平滑調節顯示亮度（Valve Index）
  - 允許您在入睡時逐漸降低頭戴式顯示器的亮度
- :eyeglasses: 自動調節 SteamVR 的渲染解析度
  - 允許您在入睡時降低頭戴式顯示器的渲染解析度
- :calling: [預設的表情選單](https://github.com/Raphiiko/Oyasumi/wiki/Oyasumi-Expression-Menu)，可在 VRChat 內直接控制某些功能
- :dizzy: 自動睡眠動畫和姿勢檢測
  - 根據您的睡姿自動切換您的角色睡眠動畫。
  - 使用附帶的 OSC 腳本編輯器觸發您自己的動畫。
  - 為常用的移動方式資源提供預設值，包括：
    - [ごろ寝システム v2.2 - 2.3](https://minminmart.booth.pm/items/2886739) by [みんみんみーん](https://twitter.com/minminmeeean)
      <br>(Sleep System v2.2 - 2.3 by minminmiin)
      <br>(也支援 [EX 版本](https://booth.pm/en/items/4233545)！)
    - [GoGo Loco v1.7.1+](https://booth.pm/en/items/3290806) by [franada](https://twitter.com/franada)
      <br>(對於 1.6.2 - 1.7.0，也可提供半功能性的解決方案)
- :zzz: 自動啟動/停用睡眠模式，觸發自動化
  - 檢測入睡：
    - 當Oyasumi根據您的運動猜測您正在入睡時
    - 當控制器或追蹤器電池電量低於閾值時
    - 當關閉控制器時
    - 根據時間表
  - 檢測醒來：
    - 當打開控制器或追蹤器時
    - 根據時間表
    - 當SteamVR停止時
- 🗺️ 多語言支持
  - 英語
  - 荷蘭語（Nederlands）
  - 日語（日本語）（外包 + 社區貢獻者：[なき](https://twitter.com/NoYu_idea)）
  - 韓語\*（한국어）（社區貢獻者：[Soumt](https://github.com/soumt-r)）
  - 繁體中文\*（繁體中文）（社區貢獻者：[狐 Kon](https://github.com/XoF-eLtTiL)）
  - 簡體中文\*（簡體中文）（社區貢獻者：[狐 Kon](https://github.com/XoF-eLtTiL)）
  - 法語（Français）\*（社區貢獻者：[neuroblack](https://github.com/neuroblack)）

如果您希望幫助添加更多語言和/或缺失的翻譯，請查看 [添加翻譯的 wiki 頁面](https://github.com/Raphiiko/Oyasumi/wiki/Adding-Translations) 以獲取開始的說明！

_(\*) 該語言的支持是社區貢獻的，因此翻譯可能無法與每個更新完全覆蓋。_

### 使用的工具

Oyasumi使用 [Angular](https://angular.io/) 和 [Tauri](https://tauri.app/) 構建。

## 支持的設備

### 電池自動化

目前，Oyasumi支持所有支持以下功能的SteamVR設備：

1. 支持報告電池電量和充電狀態
2. 支持通過SteamVR關閉

這包括但不限於以下設備：

- HTC Vive 控制器/手把
- Index 控制器/手把
- Vive 追蹤器（1.0/2.0/3.0）
- Tundra 追蹤器\*

這意味著任何Oculus控制器都不太可能工作，除非SlimeVR在其 [OpenVR 驅動程序](https://github.com/SlimeVR/SlimeVR-OpenVR-Driver) 中實現了這個功能。

_(\*) Tundra 追蹤器的電池電量和充電狀態報告非常延遲。這意味著儘管自動化仍然有效，但它們將非常延遲（分鐘級別），除非Tundra在其追蹤器韌體中修復此問題。 (https://forum.tundra-labs.com/t/firmware-issues/746)_

### GPU 自動化

任何受 MSI Afterburner 支持的 NVIDIA 或 AMD 顯示卡都可以通過 Oyasumi 啟用您在 MSI Afterburner 中設置的配置文件。

直接使用 Oyasumi 控制顯示卡的功率限制僅支持 NVIDIA 顯示卡。AMD 用戶將需要使用 MSI Afterburner 配置文件自動化來控制功率限制。

### 顯示亮度自動化

目前，這些自動化僅在 Valve Index 上受支援。

支持透過調整圖像亮度來支持更多頭顯是 [計劃中的未來發布功能](https://github.com/Raphiiko/Oyasumi/issues/14)。

## 開發

### 先決條件

#### Rust & Tauri
開始 Oyasumi 的開發之前，請首先遵循 Tauri 的 [先決條件](https://tauri.app/v1/guides/getting-started/prerequisites)。

這包括安裝 VS C++ 構建工具、WebView2 和 Rust。

#### Clang
接下來，您需要[安裝 clang](https://rust-lang.github.io/rust-bindgen/requirements.html#windows)。這是生成與 OpenVR 的綁定所必需的。

根據連結的指南，確保：
1. 安裝 Clang（例如，通過 `winget install LLVM.LLVM`）
2. 將 `LIBCLANG_PATH` 環境變數設置為 LLVM 安裝的 `bin` 目錄。

#### NodeJS
接下來，安裝 [NodeJS](https://nodejs.org/en/download/)。這是構建 UI 和覆蓋層的 Web 前端所必需的。

### 設置項目

一旦您設置了這些依賴項，您可以按照以下步驟繼續：

1. 在您的計算機上複製 Oyasumi：`git clone https://github.com/Raphiiko/OyasumiVR.git`
2. 進入新項目目錄：`cd OyasumiVR`
3. 從 NPM 安裝主 UI 的依賴項：`npm install`
4. 至少運行一次 `npm run build`。

一旦這一步順利完成，您可以運行 `npm run dev` 在本地運行 Oyasumi 並開始開發！

## VRChat

Oyasumi 的某些功能需要您使用 VRChat 帳戶登入才能正常工作（例如狀態自動化）。

只有依賴此功能的功能需要進行身份驗證。您可以在不提供憑據的情況下使用不依賴此功能的功能。
您的登錄憑據永遠不會被儲存在任何地方，只會發送到 VRChat 的伺服器進行身份驗證。

Oyasumi 不被 VRChat 支持，不代表 VRChat 或其開發人員的官方產品。在使用 Oyasumi 時，請遵守 VRChat 的使用條款和條件。如果您遇到與 VRChat 相關的問題，請聯絡 VRChat 的支持團隊。
